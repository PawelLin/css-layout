<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>grid网格系统</title>
	<style>
	html,body,div,textarea{
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}
	html,body {
		height: 100%;
	}
	input {
		outline: none;
		border: none;
	}
	#grid {
		height: 100%;
	}
	.grid {
		margin: auto;
		display: grid;
		width: 720px;
		height: 525px;
		grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
		grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
		grid-gap: 2px 2px;
		overflow-y: auto;
	}
	.grid > div {
		background-color: #f9c;
	}
	.nav {
		grid-template-rows: 1fr;
		margin-bottom: 10px;
		height: 60px;
	}
	.item {
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center;
	}
	.item span {
		display: block;
		width: 30px;
	}
	.item input {
		width: 20px;
		text-align: center;
	}
	.item textarea {
		width: 100%;
		height: 100%;
		background-color: transparent;
		outline: none;
		resize: none;
		border: none;
	}
	.change-div {
		position: relative;
		cursor: pointer;
	}
	.change-div:active {
		transform: scale(.9);
	}
	.change-div:after {
		content: '+';
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		font-size: 30px;
		color: #FFF;
		font-weight: bold;
		text-align: center;
	}
	.reduce-div:after {
		content: '-'
	}
	.show-div:after {
		content: 'input show';
		font-size: 16px;
	}
	.hidden-div:after {
		content: 'input hidden';
		font-size: 16px;
	}
	[v-cloak] {
	  	display: none;
	}
	</style>
</head>
<body>
	<div id="grid">
		<div class="grid nav">
			<div class="change-div add-div" @click="changeItem(1)">
			</div>
			<div class="change-div reduce-div" @click="changeItem(-1)">
			</div>
			<div class="change-div" :class="{'show-div': !showDetail, 'hidden-div': showDetail}" @click="showDetail = !showDetail">
			</div>
		</div>
		<div class="grid" v-cloak>
			<div :style="[{'grid-area': 'span ' + item.row + ' / span ' + item.col }]" class="item" v-for="item in items">
				<div class="row" v-show="showDetail">
					<!-- <span>row</span> -->
					<input @focus="selectAll" v-model="item.row" type="text">
				</div>
				<div class="col" v-show="showDetail">
					<!-- <span>col</span> -->
					<input @focus="selectAll" v-model="item.col" type="text">
				</div>
				<textarea v-show="!showDetail" v-model="item.model"></textarea>
			</div>
		</div>
	</div>
	<script src="../vue.js"></script>
	<script>
		
		new Vue({
			el: '#grid',
			data: {
				items: [
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 2, col: 2, model: '' },
					{ row: 2, col: 2, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 3, col: 3, model: '' },
					{ row: 1, col: 2, model: '' },
					{ row: 2, col: 2, model: '' },
					{ row: 2, col: 1, model: '' },
					{ row: 1, col: 2, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 2, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 2, col: 4, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 2, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 3, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 3, col: 2, model: '' },
					{ row: 2, col: 3, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 2, col: 2, model: '' },
					{ row: 1, col: 3, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 2, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 2, col: 2, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' },
					{ row: 1, col: 1, model: '' }
				],
				showDetail: false
			},
			filters: {
				styleObject: function (model) {
	    			if (!model) return {}
	    			let preModel = model.substring(0, model.lastIndexOf(';') + 1)
	    			let _model = model.replace(/:/g, '":"').replace(/\n/g, '').replace(/;/g,'","')
					_model = _model.substring(0, _model.length - 2)
					try {
						return JSON.parse(`{"${_model}}`)
					} catch(error) {
						_model = preModel.replace(/:/g, '":"').replace(/\n/g, '').replace(/;/g,'","')
						_model = _model.substring(0, _model.length - 2)
						try {
							return JSON.parse(`{"${_model}}`)
						} catch(err) {
							return {}
						}
					}
	  			}
			},
			methods: {
				changeItem (type) {
					if(type > 0) {
						this.items.push({ row: 1, col: 1 })
					} else {
						this.items.pop()
					}
				},
				selectAll(event){
  					setTimeout(function(){
  						event.target.select();
  					}, 0);
  				}
			}
		})

	</script>
</body>
</html>