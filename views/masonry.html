<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>瀑布流布局</title>
	<style>
	*{
		margin: 0;
		padding: 0;
	}
	html,body{
		height: 100%;
	}
	.contain{
		padding: 10px;
	}
	.contain:after{
		content: 'clear';
		display: block;
		clear: both;
		line-height:0;
		visibility:hidden;
	}
	.title{
		padding: 10px;
		text-align: center;
		border: 1px solid #FFF;
		border-bottom: none;
	}
	.title > button{
		float: right;
		padding: 1px 5px;
		border: 1px solid #FFF;
		background-color: transparent;
		cursor: pointer;
		outline: none;
	}
	.title > button:active{
		transform: scale(0.9);
	}
	.column{
		padding: 10px;
		border: 1px solid #FFF;
        column-count: 4;
      	column-gap: 1em;
	}
	.column > .item{
      	-webkit-column-break-inside: avoid;
      	margin-bottom: 10px;
      	/* border: 1px solid #CCC; */
		box-shadow: 0 4px 6px 0 rgba(0,0,0,.16);
      	font-size: 0;
	}
	.column > .item > img{
		position: relative;
		width: 100%;
		border: 5px solid #FFF;
		box-sizing: border-box;
		transition: 1s all;
	}	
	</style>
</head>
<body>
	<section class="contain">
		<div class="left">
			<div class="title">
				column瀑布流
				<button onclick="add()">添加</button>
			</div>
			<div class="column">
				<div class="item">
					<img src="https://img.16pic.com/00/93/43/16pic_9343796_s.png"	>
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/92/19/16pic_9219148_s.jpg">
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/92/19/16pic_9219147_s.jpg">
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/86/85/16pic_8685595_s.jpg">
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/93/42/16pic_9342283_s.jpg">
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/93/43/16pic_9343795_s.png">
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/92/21/16pic_9221174_s.jpg">
				</div>
				<div class="item">
					<img src="https://img.16pic.com/00/92/40/16pic_9240140_s.jpg">
				</div>
			</div>
		</div>
	</section>
	<script>
	let num = 1
	let body = document.querySelector('body')
	let bodyHeight = body.offsetHeight + 100
	let containHeight = 0
	body.onscroll = function() {
		containHeight = document.querySelector('.contain').offsetHeight
		if((containHeight - body.scrollTop) < bodyHeight){
			add()
		}
	}

	function add() {
		let column = document.querySelector('.column')
		let itemLength = column.querySelectorAll('.item').length + 1
		let div = document.createElement('div')
		let img = document.createElement('img')
		let name = num.toString().length === 1 ? `0${num}` : num
		num++
		div.className = 'item'
		img.src = `https://img.16pic.com/00/92/40/16pic_92401${name}_s.jpg`
		div.appendChild(img)
		column.appendChild(div)
	}

	</script>
</body>
</html>